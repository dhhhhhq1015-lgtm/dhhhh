<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASTRO-FLOW 专业星骰</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-image: url('bg.jpg'); 
            --gold: #c9b067;
            --glass: rgba(15, 15, 25, 0.75); 
            --text-white: #ffffff;
        }

        body {
            margin: 0;
            background: #050508 var(--bg-image) no-repeat center center fixed;
            background-size: cover;
            color: var(--text-white);
            font-family: 'PingFang SC', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* --- 骰子区域：增加外发光与呼吸效果 --- */
        .dice-stage {
            display: flex;
            justify-content: center;
            gap: 50px;
            perspective: 1200px;
            margin: 80px 0 40px 0;
        }

        .dice-3d { 
            width: 100px; 
            height: 100px; 
            position: relative; 
            transform-style: preserve-3d; 
            transition: transform 1.5s cubic-bezier(0.2, 0.8, 0.3, 1.1);
            /* 外层光晕动画 */
            filter: drop-shadow(0 0 10px rgba(201, 176, 103, 0.3));
            animation: breathe 3s infinite ease-in-out;
        }

        @keyframes breathe {
            0%, 100% { filter: drop-shadow(0 0 5px rgba(201, 176, 103, 0.2)); }
            50% { filter: drop-shadow(0 0 20px rgba(201, 176, 103, 0.6)); }
        }

        .face {
            position: absolute; 
            width: 100px; 
            height: 100px;
            background: rgba(15, 15, 25, 0.8);
            /* 六边形形状 */
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            /* 双层细边框感 */
            border: 1px solid rgba(255, 255, 255, 0.5);
            outline: 1px solid var(--gold);
            outline-offset: -5px;
            
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 2.2rem; 
            color: var(--text-white); 
            backface-visibility: hidden;
        }

        /* 3D 转换位置 */
        .front  { transform: rotateY(0deg) translateZ(48px); }
        .back   { transform: rotateY(180deg) translateZ(48px); }
        .right  { transform: rotateY(90deg) translateZ(48px); }
        .left   { transform: rotateY(-90deg) translateZ(48px); }
        .top    { transform: rotateX(90deg) translateZ(48px); }
        .bottom { transform: rotateX(-90deg) translateZ(48px); }

        .rolling { animation: spin 0.4s infinite linear; }
        @keyframes spin { from { transform: rotateX(0) rotateY(0); } to { transform: rotateX(360deg) rotateY(360deg); } }

        /* --- 投掷按钮：白色背景 50% 透明 --- */
        .btn-roll {
            background: rgba(255, 255, 255, 0.5); /* 白色背景 50% 透明 */
            color: #ffffff; /* 文字白色 */
            border: 1px solid rgba(255, 255, 255, 0.8); /* 白色细边框 */
            padding: 12px 60px; 
            border-radius: 30px;
            font-weight: bold; 
            cursor: pointer; 
            font-size: 18px; 
            margin: 40px auto; 
            display: block;
            backdrop-filter: blur(10px); /* 磨砂玻璃效果 */
            letter-spacing: 4px;
            transition: 0.3s;
        }

        .btn-roll:hover {
            background: rgba(255, 255, 255, 0.65);
            transform: scale(1.05);
        }

        /* --- 结果卡片样式 --- */
        .card {
            background: var(--glass);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 100%;
            max-width: 600px;
            display: none;
            margin-top: 30px;
        }

        .title { color: var(--gold); text-align: center; font-size: 1.4rem; margin-bottom: 20px; }
        .box h4 { color: var(--gold); font-size: 13px; margin-bottom: 5px; }
        .box p { font-size: 14px; line-height: 1.6; color: white; margin: 0; }
        .footer-info { margin-top: 20px; font-size: 12px; color: rgba(255,255,255,0.7); border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px; }
    </style>
</head>
<body>

<div id="capture-area" style="display: flex; flex-direction: column; align-items: center; width: 100%;">
    <div class="dice-stage">
        <div class="dice-3d" id="dice-p"><div class="face front">?</div><div class="face back">☉</div><div class="face right">☽</div><div class="face left">♂</div><div class="face top">☿</div><div class="face bottom">♃</div></div>
        <div class="dice-3d" id="dice-s"><div class="face front">?</div><div class="face back">♈</div><div class="face right">♉</div><div class="face left">♊</div><div class="face top">♋</div><div class="face bottom">♌</div></div>
        <div class="dice-3d" id="dice-h"><div class="face front">?</div><div class="face back">1</div><div class="face right">4</div><div class="face left">7</div><div class="face top">10</div><div class="face bottom">12</div></div>
    </div>

    <button class="btn-roll" onclick="startRoll()">投掷骰子</button>

    <div class="card" id="res-card">
        <div class="title" id="res-title"></div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="box"><h4>行星</h4><p id="res-p"></p></div>
            <div class="box"><h4>星座</h4><p id="res-s"></p></div>
        </div>
        <div class="box" style="margin-top:20px;"><h4>领域</h4><p id="res-h"></p></div>
        <div class="footer-info" id="res-rel"></div>
    </div>
</div>

<script>
    // 逻辑部分保持之前的高质量释义库
    const planets = [{name:"太阳",sym:"☉",desc:"核心意志、目标。"},{name:"月亮",sym:"☽",desc:"内在情绪、安全感。"},{name:"水星",sym:"☿",desc:"沟通、思维。"},{name:"金星",sym:"♀",desc:"价值、爱情、美。"},{name:"火星",sym:"♂",desc:"行动力、冲突。"},{name:"木星",sym:"♃",desc:"扩张、幸运。"},{name:"土星",sym:"♄",desc:"限制、责任。"}];
    const signs = [{name:"白羊座",sym:"♈",desc:"火象/开创。"},{name:"金牛座",sym:"♉",desc:"土象/固定。"},{name:"双子座",sym:"♊",desc:"风象/变动。"},{name:"巨蟹座",sym:"♋",desc:"水象/开创。"},{name:"狮子座",sym:"♌",desc:"火象/固定。"},{name:"处女座",sym:"♍",desc:"土象/变动。"}];
    
    function startRoll() {
        const dp = document.getElementById('dice-p');
        const ds = document.getElementById('dice-s');
        const dh = document.getElementById('dice-h');
        [dp, ds, dh].forEach(d => d.classList.add('rolling'));

        setTimeout(() => {
            [dp, ds, dh].forEach(d => d.classList.remove('rolling'));
            const p = planets[Math.floor(Math.random()*planets.length)];
            const s = signs[Math.floor(Math.random()*signs.length)];
            const h = Math.floor(Math.random()*12) + 1;

            const rots = ["rotateX(0deg)","rotateY(180deg)","rotateY(90deg)","rotateY(-90deg)","rotateX(90deg)","rotateX(-90deg)"];
            dp.style.transform = rots[Math.floor(Math.random()*6)];
            ds.style.transform = rots[Math.floor(Math.random()*6)];
            dh.style.transform = rots[Math.floor(Math.random()*6)];

            document.querySelectorAll('.front').forEach((f, i) => {
                if(i===0) f.innerText = p.sym;
                if(i===1) f.innerText = s.sym;
                if(i===2) f.innerText = h;
            });

            document.getElementById('res-card').style.display = 'block';
            document.getElementById('res-title').innerText = `${p.name} · ${s.name} · ${h}宫`;
            document.getElementById('res-p').innerText = p.desc;
            document.getElementById('res-s').innerText = s.desc;
            document.getElementById('res-h').innerText = `落在第 ${h} 宫的领域。`;
        }, 1000);
    }
</script>
</body>
</html>
